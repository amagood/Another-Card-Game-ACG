{"version":3,"sources":["serviceWorker.js","InputRow.js","DeskPage.js","RoomWaitingPage.js","RoomPage.js","CardPoolPage.js","ModifyCardsPage.js","PlayerInfoPage.js","LobbyPage.js","LoginPage.js","GoBackButton.js","Dialog.js","ServerSide.js","App.js","Util.js","AcgAppController.js","index.js"],"names":["Boolean","window","location","hostname","match","InputRow","react_default","a","createElement","className","htmlFor","this","props","id","labelText","type","autoComplete","onChange","React","Component","DeskPage","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","message","appUtils","serverSide","addListener","packet","JSON","stringify","setState","assign","concat","toConsumableArray","sendData","bind","assertThisInitialized","parse","document","getElementById","value","trim","logger","debug","send","messageNode","i","length","push","key","onClick","RoomWaitingPage","nextPage","roomInfo","data","eventType","action","objectSpread","roomMode","roomId","roomName","roomLevel","playerId","full","playing","startGame","goBackThisPage","setGoBackHandler","goBackPrevPage","thisPageStyle","src_DeskPage","undefined","role","aria-label","RoomPage","roomList","creatingRoom","nextRoomId","_loop","result","promptDialog","handleClickCreateRoomButton","getRoomList","roomPassword","userId","getUserInfo","_this2","src_InputRow","createRoom","_this3","buttons","handleEnterRoomButton","_loop2","_roomId","parseInt","room","liContent","windowContent","_this4","renderCreateRoomForm","renderRoomList","src_RoomWaitingPage","setRoomMode","CardPoolPage","function","returnValue","success","amount","money","drawCards","num","params","ModifyCardsPage","deck","sort","b","amounts","cards","getCards","modifyCards","newCards","randomIndex","Math","floor","random","_ref","splice","content","join","PlayerInfoPage","playerInfo","returnInfo","username","accountName","ladderPoint","ladderLevel","win","lose","level","exp","sendPlayerInfoPacket","info","getMoney","LobbyPage","playBgm","src_RoomPage","src_CardPoolPage","src_ModifyCardsPage","src_PlayerInfoPage","LoginPage","handleSubmit","handleRegister","setUserInfo","password","reload","src_LobbyPage","LoginPage_LoginForm","onSubmit","onRegister","LoginForm","e","preventDefault","signUpInfo","repeat","GobackButton","goBackHandler","returnSetGoBackHandlerFun","handler","Dialog","title","warning","error","onOk","DialogController","dialogs","lastDialogIndex","returnPromptDialogFun","callback","arguments","dialogId","dialogElements","dialog","Dialog_Dialog","handleClearDialog","ServerSide","options","serverPort","port","listeners","io","on","identifier","handdler","sendRawObject","time","Date","now","emit","App","audioName","userInfo","userName","apply","audio","clickSound","Audio","bgmNormal","bgmBattle","startsWith","volume","loop","appElement","addEventListener","target","classList","contains","currentTime","play","parentElement","setUserId","pause","src_LoginPage","GoBackButton","fun","Dialog_DialogController","util","Logger","_class","console","levelOrder","indexOf","createClass","log","warn","calculateRem","customWidth","customHeight","width","documentElement","clientWidth","height","clientHeight","adjustWindowSize","style","fontSize","AcgAppController","app","ReactDOM","render","src_App","acgAppController","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"4KAYoBA,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,gJCLSC,mLATX,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,SAAOE,QAASC,KAAKC,MAAMC,IAAKF,KAAKC,MAAME,WAC3CR,EAAAC,EAAAC,cAAA,SAAOO,KAAMJ,KAAKC,MAAMG,KAAMF,GAAIF,KAAKC,MAAMC,GAAIG,aAAcL,KAAKC,MAAMI,aAAcC,SAAUN,KAAKC,MAAMK,mBAL9FC,IAAMC,yBC+CdC,cA9Cb,SAAAA,EAAYR,GAAO,IAAAS,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAX,KAAAS,IACjBC,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAAF,GAAAM,KAAAf,KAAMC,KACDe,MAAQ,CACXC,QAAS,IAGXP,EAAKT,MAAMiB,SAASC,WAAWC,YAAY,OAAQ,SAACC,GAClD,IAAMJ,EAAUK,KAAKC,UAAUF,EAAQ,KAAM,GAC7CX,EAAKc,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5CC,QAAO,GAAAS,OAAAf,OAAAgB,EAAA,EAAAhB,CAAMK,EAAMC,SAAZ,CAAqBA,UAIhCP,EAAKkB,SAAWlB,EAAKkB,SAASC,KAAdlB,OAAAmB,EAAA,EAAAnB,CAAAD,IAbCA,0EAiBjB,IAAMO,EAAUK,KAAKS,MAAMC,SAASC,eAAe,uBAAuBC,MAAMC,QAChF7C,OAAO8C,OAAOC,MAAd,mBAAAX,OAAuCJ,KAAKC,UAAUN,EAAS,KAAM,KACrEjB,KAAKC,MAAMiB,SAASC,WAAWmB,KAAKrB,oCAMpC,IAFA,IAAMA,EAAUjB,KAAKgB,MAAMC,QACrBsB,EAAc,GACXC,EAAI,EAAGA,EAAIvB,EAAQwB,SAAUD,EACpCD,EAAYG,KACV/C,EAAAC,EAAAC,cAAA,KAAG8C,IAAKH,GAAIvB,EAAQtB,EAAAC,EAAAC,cAAA,aAEtB0C,EAAYG,KACV/C,EAAAC,EAAAC,cAAA,MAAI8C,IAAK,KAAOH,KAIpB,OACE7C,EAAAC,EAAAC,cAAA,OAAKK,GAAG,aACNP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAAA,YAAUK,GAAG,wBACbP,EAAAC,EAAAC,cAAA,UAAQC,UAAU,YAAY8C,QAAS5C,KAAK4B,UAA5C,iBAEFjC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAgBI,GAAG,sBAAsBqC,WAzCzChC,IAAMC,WCsFdqC,cApFb,SAAAA,EAAY5C,GAAO,IAAAS,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAX,KAAA6C,IACjBnC,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAAkC,GAAA9B,KAAAf,KAAMC,KACDe,MAAQ,CACX8B,SAAU,KACVC,SAAU,MAGZrC,EAAKT,MAAMiB,SAASC,WAAWC,YAAY,eAAgB,SAACC,GAC1D,GAAoB,2BAAhBA,EAAOjB,KAAX,CAGA,IAAM4C,EAAO3B,EAAO2B,KACG,SAAnBA,EAAKC,WACa,gBAAhBD,EAAKE,QACPxC,EAAKc,SAAS,SAACR,GAWb,OAVAA,EAAKL,OAAAwC,EAAA,EAAAxC,CAAA,GAAOK,IACN+B,SAAW,CACfK,SAAUJ,EAAKI,SACfC,OAAQL,EAAKK,OACbC,SAAUN,EAAKM,SACfC,UAAWP,EAAKO,UAChBC,SAAUR,EAAKQ,SACfC,KAAMT,EAAKS,KACXC,QAASV,EAAKU,SAET1C,OAMfN,EAAKiD,UAAYjD,EAAKiD,UAAU9B,KAAflB,OAAAmB,EAAA,EAAAnB,CAAAD,IACjBA,EAAKkD,eAAiBlD,EAAKkD,eAAe/B,KAApBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IACtBA,EAAKT,MAAMiB,SAAS2C,iBAAiB,MAjCpBnD,gFAqCjBV,KAAKwB,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5C8B,SAAU,SAEZ9C,KAAKC,MAAMiB,SAAS2C,iBAAiB7D,KAAKC,MAAM6D,oDAIhD9D,KAAKwB,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5C8B,SAAU,iDAKZ,IAEIA,EACAiB,EAAgB,OAapB,MAZ4B,cAAxB/D,KAAKgB,MAAM8B,SACbA,EACEnD,EAAAC,EAAAC,cAACmE,EAAD,CACE9C,SAAUlB,KAAKC,MAAMiB,SACrB4C,eAAgB9D,KAAK4D,eACrBP,OAAQrD,KAAKC,MAAMoD,SAIvBU,OAAgBE,EAIhBtE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OAAKK,GAAG,oBAAoBJ,UAAWiE,GACrCpE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,UAAQ8C,IAAI,QAAQ7C,UAAU,YAAY8C,QAAS5C,KAAK2D,WACtDhE,EAAAC,EAAAC,cAAA,QAAMqE,KAAK,MAAMC,aAAW,QAA5B,gBADF,6BACqDnE,KAAKC,MAAMoD,SAGlE1D,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAxBF,KA4BdgD,UA/EqBvC,IAAMC,WC8PrB4D,cA5Pb,SAAAA,EAAYnE,GAAO,IAAAS,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAX,KAAAoE,IACjB1D,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAAyD,GAAArD,KAAAf,KAAMC,KACDe,MAAQ,CACX8B,SAAU,KACVM,UAAW,EACXiB,SAAU,GACVC,cAAc,GAEhB5D,EAAK6D,WAAa,EAElB7D,EAAKT,MAAMiB,SAASC,WAAWC,YAAY,YAAa,SAACC,GACnC,2BAAhBA,EAAOjB,OAGNM,EAAKM,MAAM8B,UAAsC,SAA1BzB,EAAO2B,KAAKC,WAAsB,WAC5D,IAAMD,EAAO3B,EAAO2B,KAGpB,GAAoB,gBAAhBA,EAAKE,OACP,IADiC,IAAAsB,EAAA,SACxBhC,GACP9B,EAAKc,SAAS,SAACR,GAGb,OAFAA,EAAKL,OAAAwC,EAAA,EAAAxC,CAAA,GAAOK,IACNqD,SAASrB,EAAKK,OAAOb,IAAM,KAC1BxB,IAETN,EAAKT,MAAMiB,SAASC,WAAWmB,KAAK,CAClCW,UAAW,OACXC,OAAQ,cACRE,SAAUJ,EAAKI,SACfC,OAAQL,EAAKK,OAAOb,MAVfA,EAAI,EAAGA,EAAIQ,EAAKK,OAAOZ,SAAUD,EAAGgC,EAApChC,OAegB,gBAAhBQ,EAAKE,OACdxC,EAAKc,SAAS,SAACR,GAWb,OAVAA,EAAKL,OAAAwC,EAAA,EAAAxC,CAAA,GAAOK,IACNqD,SAASrB,EAAKK,QAAU,CAC5BD,SAAUJ,EAAKI,SACfC,OAAQL,EAAKK,OACbC,SAAUN,EAAKM,SACfC,UAAWP,EAAKO,UAChBC,SAAUR,EAAKQ,SACfC,KAAMT,EAAKS,KACXC,QAASV,EAAKU,SAET1C,IAIgB,eAAhBgC,EAAKE,OACVF,EAAKyB,QACP/D,EAAK6D,WAAavB,EAAKK,OACvB3C,EAAKT,MAAMiB,SAASwD,aAClB,OADF,kGAAAhD,OAEyBsB,EAAKK,OAF9B,gCAAA3B,OAE+CsB,EAAKM,UAClD,WACE5C,EAAKc,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5C8B,SAAU,2BAMhBpC,EAAKT,MAAMiB,SAASwD,aAAa,QAAS,oDAInB,cAAhB1B,EAAKE,QAA0C,oBAAhBF,EAAKE,SACzCF,EAAKyB,QACP/D,EAAK6D,WAAavB,EAAKK,OACvB3C,EAAKc,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5C8B,SAAU,yBAGZpC,EAAKT,MAAMiB,SAASwD,aAAa,QAAS,4IA7Dc,MAmEhEhE,EAAKiE,4BAA8BjE,EAAKiE,4BAA4B9C,KAAjClB,OAAAmB,EAAA,EAAAnB,CAAAD,IACnCA,EAAKkD,eAAiBlD,EAAKkD,eAAe/B,KAApBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IACtBA,EAAKT,MAAMiB,SAAS2C,iBAAiBnD,EAAKT,MAAM6D,gBAnF/BpD,gFAuFjBV,KAAKwB,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5C8B,SAAU,SAEZ9C,KAAKC,MAAMiB,SAAS2C,iBAAiB7D,KAAKC,MAAM6D,oDAGtCV,GACVpD,KAAKwB,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5CoC,SAAUA,EACViB,SAAU,GACVC,cAAc,MAEhBtE,KAAK4E,YAAYxB,uCAGPA,GACVpD,KAAKC,MAAMiB,SAASC,WAAWmB,KAAK,CAClCW,UAAW,OACXC,OAAQ,cACRE,SAAUA,0DAKZpD,KAAKwB,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5CsD,cAAc,yCAIPhB,GACTtD,KAAKC,MAAMiB,SAASC,WAAWmB,KAAK,CAClCW,UAAW,OACXC,OAAQ,aACRE,SAAUpD,KAAKgB,MAAMoC,SACrBE,SAAUA,EACVuB,aAAc,GACdC,OAAQ9E,KAAKC,MAAMiB,SAAS6D,cAAcD,uDAIxBzB,GACpBrD,KAAKC,MAAMiB,SAASC,WAAWmB,KAAK,CAClCW,UAAW,OACXC,QAAoB,IAAZG,EAAgB,kBAAoB,YAC5CD,SAAUpD,KAAKgB,MAAMoC,SACrBC,QAAoB,IAAZA,OAAgBY,EAAYZ,EACpCwB,aAAc,GACdC,OAAQ9E,KAAKC,MAAMiB,SAAS6D,cAAcD,wDAIvB,IAAAE,EAAAhF,KACrB,OACEL,EAAAC,EAAAC,cAAA,OAAKK,GAAG,oBACNP,EAAAC,EAAAC,cAACoF,EAAD,CAAU9E,UAAU,2BAAOD,GAAG,mBAAmBE,KAAK,SACtDT,EAAAC,EAAAC,cAAA,UACEC,UAAU,YACV8C,QAAS,WACPoC,EAAKE,WACHlD,SAASC,eAAe,oBAAoBC,OAE9C8C,EAAKxD,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5CsD,cAAc,QAPpB,0DAgBW,IAAAa,EAAAnF,KACTqE,EAAW,GAGXe,EAAU,GAEZpF,KAAKgB,MAAMoC,UAAY,GACzBgC,EAAQ1C,KACN/C,EAAAC,EAAAC,cAAA,UACE8C,IAAI,oBACJC,QAAS,WAAOuC,EAAKE,uBAAuB,IAC5CvF,UAAU,aAHZ,6BASwB,IAAxBE,KAAKgB,MAAMoC,UACbgC,EAAQ1C,KACN/C,EAAAC,EAAAC,cAAA,UACE8C,IAAI,cACJC,QAAS5C,KAAK2E,4BACd7E,UAAU,aAHZ,6BASJuE,EAAS3B,KAAK/C,EAAAC,EAAAC,cAAA,MAAI8C,KAAM,GAAIyC,IA5Bb,IAAAE,EAAA,SAAAC,GAgCblC,EAASmC,SAASnC,EAAQ,IAC1B,IAAMoC,EAAON,EAAKnE,MAAMqD,SAAShB,GAC3BqC,EAAY,GAClBA,EAAUhD,KAAK/C,EAAAC,EAAAC,cAAA,QAAM8C,IAAI,UAAU7C,UAAU,WAAWuD,IAEpDoC,IACFC,EAAUhD,KAAK/C,EAAAC,EAAAC,cAAA,QAAM8C,IAAI,YAAY7C,UAAU,aAAa2F,EAAKnC,WACjEoC,EAAUhD,KAAK/C,EAAAC,EAAAC,cAAA,QAAM8C,IAAI,aAAa7C,UAAU,cAAc2F,EAAKlC,YACnEmC,EAAUhD,KAAK/C,EAAAC,EAAAC,cAAA,QAAM8C,IAAI,eAAe7C,UAAU,eAAe2F,EAAKjC,SAASf,OAAhE,YAGjB4B,EAAS3B,KACP/C,EAAAC,EAAAC,cAAA,MACE8C,IAAKU,EACLT,QAAS,WAAOuC,EAAKE,sBAAsBhC,IAC3CvD,UAAU,aAAa4F,IA/CdrC,EAAAkC,GA+Bf,IAAK,IAAIlC,KAAUrD,KAAKgB,MAAMqD,SAAUiB,EAA/BjC,GAqBT,OAAQ1D,EAAAC,EAAAC,cAAA,MAAIC,UAAU,aAAauE,oCAG5B,IACHsB,EAOA7C,EARG8C,EAAA5F,KAGL2F,EADE3F,KAAKgB,MAAMsD,aACGtE,KAAK6F,uBAEL7F,KAAK8F,iBAIvB,IAAI/B,EAAgB,OAapB,MAZ4B,sBAAxB/D,KAAKgB,MAAM8B,SACbA,EACEnD,EAAAC,EAAAC,cAACkG,EAAD,CACE7E,SAAUlB,KAAKC,MAAMiB,SACrB4C,eAAgB9D,KAAK4D,eACrBP,OAAQrD,KAAKuE,aAIjBR,OAAgBE,EAIhBtE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OAAKK,GAAG,YAAYJ,UAAWiE,GAC7BpE,EAAAC,EAAAC,cAAA,OAAKK,GAAG,yBACNP,EAAAC,EAAAC,cAAA,UAAQK,GAAG,+BAA+BJ,UAAU,YAAY8C,QAAS,WAAOgD,EAAKI,YAAY,KAAjG,4BACArG,EAAAC,EAAAC,cAAA,UAAQK,GAAG,+BAA+BJ,UAAU,YAAY8C,QAAS,WAAOgD,EAAKI,YAAY,KAAjG,6BAEFrG,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACZ6F,IAGJ7C,UAvPcvC,IAAMC,WCmDdyF,cApDb,SAAAA,EAAYhG,GAAO,IAAAS,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAX,KAAAiG,IACjBvF,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAAsF,GAAAlF,KAAAf,KAAMC,KACDe,MAAQ,GAEbN,EAAKT,MAAMiB,SAASC,WAAWC,YAAY,YAAa,SAACC,GACvD,GAAoB,2BAAhBA,EAAOjB,KAAX,CAGA,IAAM4C,EAAO3B,EAAO2B,KACG,kBAAnBA,EAAKC,WAAmD,cAAlBD,EAAKkD,WACzClD,EAAKmD,YAAYC,QACnB1F,EAAKT,MAAMiB,SAASwD,aAClB,OADF,mEAAAhD,OAEmBsB,EAAKmD,YAAYE,OAFpC,+BAAA3E,OAEoDsB,EAAKmD,YAAYG,QAGrE5F,EAAKT,MAAMiB,SAASwD,aAClB,QADF,4CAQNhE,EAAK6F,UAAY7F,EAAK6F,UAAU1E,KAAflB,OAAAmB,EAAA,EAAAnB,CAAAD,IACjBA,EAAKT,MAAMiB,SAAS2C,iBAAiBnD,EAAKT,MAAM6D,gBAzB/BpD,yEA4BT8F,GACRxG,KAAKC,MAAMiB,SAASC,WAAWmB,KAAK,CAClCW,UAAW,gBACXiD,SAAU,YACVO,OAAQ,CAACD,sCAIJ,IAAAxB,EAAAhF,KACP,OACEL,EAAAC,EAAAC,cAAA,OAAKK,GAAG,kBACNP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,UAAQ8C,IAAK,IAAK7C,UAAU,YAAY8C,QAAS,WAAOoC,EAAKuB,UAAU,OACrE5G,EAAAC,EAAAC,cAAA,QAAMqE,KAAK,MAAMC,aAAW,iBAA5B,yDAAqDxE,EAAAC,EAAAC,cAAA,WAArD,eAEFF,EAAAC,EAAAC,cAAA,UAAQ8C,IAAK,IAAM7C,UAAU,YAAY8C,QAAS,WAAOoC,EAAKuB,UAAU,OACtE5G,EAAAC,EAAAC,cAAA,QAAMqE,KAAK,MAAMC,aAAW,SAA5B,qEAA+CxE,EAAAC,EAAAC,cAAA,WAA/C,0BA7CeU,IAAMC,WCiFlBkG,cAhFb,SAAAA,EAAYzG,GAAO,IAAAS,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAX,KAAA0G,IACjBhG,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAA+F,GAAA3F,KAAAf,KAAMC,KACDe,MAAQ,GAEbN,EAAKT,MAAMiB,SAASC,WAAWC,YAAY,eAAgB,SAACC,GAC1D,GAAoB,2BAAhBA,EAAOjB,KAAX,CAGA,IAAM4C,EAAO3B,EAAO2B,KACG,kBAAnBA,EAAKC,YACgB,aAAlBD,EAAKkD,UAA6C,gBAAlBlD,EAAKkD,UACxCxF,EAAKc,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5C2F,KAAMhG,OAAAgB,EAAA,EAAAhB,CAAIqC,EAAKmD,YAAYQ,MAAMC,KAAK,SAAChH,EAAGiH,GAAJ,OAAUjH,EAAIiH,IACpDC,QAAS9D,EAAKmD,YAAYW,QAC1BC,MAAOpG,OAAAgB,EAAA,EAAAhB,CAAIqC,EAAKmD,YAAYY,OAAOH,KAAK,SAAChH,EAAGiH,GAAJ,OAAUjH,EAAIiH,YAM9DnG,EAAKsG,SAAWtG,EAAKsG,SAASnF,KAAdlB,OAAAmB,EAAA,EAAAnB,CAAAD,IAChBA,EAAKuG,YAAcvG,EAAKuG,YAAYpF,KAAjBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IACnBA,EAAKT,MAAMiB,SAAS2C,iBAAiBnD,EAAKT,MAAM6D,gBAEhDpD,EAAKsG,WAxBYtG,0EA4BjBV,KAAKC,MAAMiB,SAASC,WAAWmB,KAAK,CAClCW,UAAW,gBACXiD,SAAU,WACVO,OAAQ,CAACzG,KAAKC,MAAMiB,SAAS6D,cAAcD,gDAM7C,IADA,IAAMoC,EAAQvG,OAAAgB,EAAA,EAAAhB,CAAOX,KAAKgB,MAAM+F,OACvBvE,EAAI,EAAGA,EAAI0E,EAASzE,SAAUD,EAAG,CACxC,IAAM2E,EAAcC,KAAKC,MAAMD,KAAKE,SAAWJ,EAASzE,QADhB8E,EAED,CAACL,EAASC,GAAcD,EAAS1E,IAAvE0E,EAAS1E,GAF8B+E,EAAA,GAE1BL,EAASC,GAFiBI,EAAA,GAK1CvH,KAAKC,MAAMiB,SAASC,WAAWmB,KAAK,CAClCW,UAAW,gBACXiD,SAAU,cACVO,OAAQ,CAACzG,KAAKC,MAAMiB,SAAS6D,cAAcD,QAC3C6B,KAAMO,EAASM,OAAO,EAAG,uCAK3B,IAAMC,EAAU,CACd9H,EAAAC,EAAAC,cAAA,KAAG8C,IAAI,QAAP,iBACO3C,KAAKgB,MAAM2F,MAAQ3G,KAAKgB,MAAM2F,KAAKe,KAAK,OAE/C/H,EAAAC,EAAAC,cAAA,KAAG8C,IAAI,UAAP,6BACS3C,KAAKgB,MAAM8F,SAAW,IAE/BnH,EAAAC,EAAAC,cAAA,KAAG8C,IAAI,SAAP,6BACS3C,KAAKgB,MAAM+F,OAAS/G,KAAKgB,MAAM+F,MAAMW,KAAK,QAIrD,OACE/H,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OAAKK,GAAG,qBACNP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACbH,EAAAC,EAAAC,cAAA,OAAK8C,IAAI,aAAa7C,UAAU,cAAc2H,GAC9C9H,EAAAC,EAAAC,cAAA,OAAK8C,IAAI,mBAAmB7C,UAAU,oBACpCH,EAAAC,EAAAC,cAAA,UAAQC,UAAU,YAAY8C,QAAS5C,KAAKiH,aAC1CtH,EAAAC,EAAAC,cAAA,QAAMqE,KAAK,MAAMC,aAAW,QAA5B,gBADF,uCAtEgB5D,IAAMC,WCuFrBmH,cAtFb,SAAAA,EAAY1H,GAAO,IAAAS,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAX,KAAA2H,IACjBjH,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAAgH,GAAA5G,KAAAf,KAAMC,KACDe,MAAQ,CACX4G,WAAY,MAGdlH,EAAKT,MAAMiB,SAASC,WAAWC,YAAY,cAAe,SAACC,GACzD,GAAoB,2BAAhBA,EAAOjB,KAAX,CAGA,IAAM4C,EAAO3B,EAAO2B,KACpB,GAAuB,kBAAnBA,EAAKC,UAEP,GAAsB,mBAAlBD,EAAKkD,UACP,GAAIlD,EAAKmD,YAAYC,QAAS,CAC5B,IAAMtB,EAASpE,EAAKT,MAAMiB,SAAS6D,cAAcD,OAC3C+C,EAAa7E,EAAKmD,YAAYrB,GACpCpE,EAAKc,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAAC4G,WAAY,CACzD9C,OAAQA,EACRgD,SAAUD,EAAWE,YACrBzB,MAAOuB,EAAWvB,MAClB0B,YAAaH,EAAWG,YACxBC,YAAaJ,EAAWI,YACxBC,IAAKL,EAAWK,IAChBC,KAAMN,EAAWM,KACjBC,MAAOP,EAAWO,MAClBC,IAAKR,EAAWQ,cAGO,aAAlBrF,EAAKkD,UACdxF,EAAK4H,0BAIX5H,EAAK4H,qBAAuB5H,EAAK4H,qBAAqBzG,KAA1BlB,OAAAmB,EAAA,EAAAnB,CAAAD,IAC5BA,EAAK4H,uBAnCY5H,sFAuCjBV,KAAKC,MAAMiB,SAASC,WAAWmB,KAAK,CAClCW,UAAW,gBACXiD,SAAU,iBACVO,OAAQ,CACNzG,KAAKC,MAAMiB,SAAS6D,cAAcD,UAGtC9E,KAAKC,MAAMiB,SAAS2C,iBAAiB7D,KAAKC,MAAM6D,iDAGzCwC,GACPtG,KAAKC,MAAMiB,SAASC,WAAWmB,KAAK,CAClCW,UAAW,gBACXiD,SAAU,WACVO,OAAQ,CAACH,sCAIJ,IAAAtB,EAAAhF,KACDuI,EAAOvI,KAAKgB,MAAM4G,WACxB,OACEjI,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OAAKK,GAAG,oBACNP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBACbH,EAAAC,EAAAC,cAAA,UAAQK,GAAG,MAAMJ,UAAU,YAAY8C,QAAS,WAAOoC,EAAKwD,SAAS,OAArE,2BACA7I,EAAAC,EAAAC,cAAA,UAAQK,GAAG,MAAMJ,UAAU,YAAY8C,QAAS,WAAOoC,EAAKwD,SAAS,OAArE,2BACA7I,EAAAC,EAAAC,cAAA,UAAQK,GAAG,OAAOJ,UAAU,YAAY8C,QAAS,WAAOoC,EAAKwD,SAAS,OAAtE,6BAEF7I,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,MAAI8C,IAAI,YAAR,iBAAwB4F,GAAQA,EAAKT,UACrCnI,EAAAC,EAAAC,cAAA,MAAI8C,IAAI,UAAR,OAAsB4F,GAAQA,EAAKzD,QACnCnF,EAAAC,EAAAC,cAAA,MAAI8C,IAAI,OAAR,uBAAoB4F,GAAQA,EAAKF,KACjC1I,EAAAC,EAAAC,cAAA,MAAI8C,IAAI,SAAR,iBAAqB4F,GAAQA,EAAKjC,OAClC3G,EAAAC,EAAAC,cAAA,MAAI8C,IAAI,SAAR,iBAAqB4F,GAAQA,EAAKH,OAClCzI,EAAAC,EAAAC,cAAA,MAAI8C,IAAI,OAAR,iBAAmB4F,GAAQA,EAAKL,KAChCvI,EAAAC,EAAAC,cAAA,MAAI8C,IAAI,QAAR,iBAAoB4F,GAAQA,EAAKJ,MACjCxI,EAAAC,EAAAC,cAAA,MAAI8C,IAAI,eAAR,6BAA6B4F,GAAQA,EAAKP,aAC1CrI,EAAAC,EAAAC,cAAA,MAAI8C,IAAI,eAAR,6BAA6B4F,GAAQA,EAAKN,wBA9E3B1H,IAAMC,WCwDpBiI,cAnDb,SAAAA,EAAYxI,GAAO,IAAAS,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAX,KAAAyI,IACjB/H,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAA8H,GAAA1H,KAAAf,KAAMC,KACDe,MAAQ,CACX8B,SAAU,MAGZpC,EAAKkD,eAAiBlD,EAAKkD,eAAe/B,KAApBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IACtBA,EAAKT,MAAMiB,SAAS2C,iBAAiBnD,EAAKT,MAAM6D,gBAGhDpD,EAAKT,MAAMiB,SAASwH,QAAQ,aAVXhI,gFAcjBV,KAAKwB,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5C8B,SAAU,SAEZ9C,KAAKC,MAAMiB,SAAS2C,iBAAiB7D,KAAKC,MAAM6D,iDAGzC,IACHhB,EADGkC,EAAAhF,KAEH+D,EAAgB,OAapB,MAZ4B,SAAxB/D,KAAKgB,MAAM8B,SACbA,EAAWnD,EAAAC,EAAAC,cAAC8I,EAAD,CAAUzH,SAAUlB,KAAKC,MAAMiB,SAAU4C,eAAgB9D,KAAK4D,iBACxC,cAAxB5D,KAAKgB,MAAM8B,SACpBA,EAAWnD,EAAAC,EAAAC,cAAC+I,EAAD,CAAc1H,SAAUlB,KAAKC,MAAMiB,SAAU4C,eAAgB9D,KAAK4D,iBAC5C,iBAAxB5D,KAAKgB,MAAM8B,SACpBA,EAAWnD,EAAAC,EAAAC,cAACgJ,EAAD,CAAiB3H,SAAUlB,KAAKC,MAAMiB,SAAU4C,eAAgB9D,KAAK4D,iBAC/C,gBAAxB5D,KAAKgB,MAAM8B,SACpBA,EAAWnD,EAAAC,EAAAC,cAACiJ,EAAD,CAAgB5H,SAAUlB,KAAKC,MAAMiB,SAAU4C,eAAgB9D,KAAK4D,iBAE/EG,OAAgBE,EAIhBtE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OAAKK,GAAG,aAAaJ,UAAWiE,GAC9BpE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,UAAQ8C,IAAK,EAAG7C,UAAU,YAAY8C,QAAS,WAAOoC,EAAKxD,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAAC8B,SAAU,aAA/G,wCACAnD,EAAAC,EAAAC,cAAA,UAAQ8C,IAAK,EAAG7C,UAAU,YAAY8C,QAAS,WAAOoC,EAAKxD,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAAC8B,SAAU,kBAA/G,gBACAnD,EAAAC,EAAAC,cAAA,UAAQ8C,IAAK,EAAG7C,UAAU,YAAY8C,QAAS,WAAOoC,EAAKxD,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAAC8B,SAAU,qBAA/G,4BACAnD,EAAAC,EAAAC,cAAA,UAAQ8C,IAAK,EAAG7C,UAAU,YAAY8C,QAAS,WAAOoC,EAAKxD,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAAC8B,SAAU,oBAA/G,8BAGHA,UA9CevC,IAAMC,WCFxBuI,cACJ,SAAAA,EAAY9I,GAAO,IAAAS,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAX,KAAA+I,IACjBrI,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAAoI,GAAAhI,KAAAf,KAAMC,KACDe,MAAQ,CACX8B,SAAU,MAGZpC,EAAKS,WAAaT,EAAKT,MAAMiB,SAASC,WACtCT,EAAKsI,aAAetI,EAAKsI,aAAanH,KAAlBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IACpBA,EAAKuI,eAAiBvI,EAAKuI,eAAepH,KAApBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IACtBA,EAAKkD,eAAiBlD,EAAKkD,eAAe/B,KAApBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IAGtBA,EAAKS,WAAWC,YAAY,aAAc,SAACC,GACzC,GAAKX,EAAKM,MAAM8B,UAA4B,2BAAhBzB,EAAOjB,KAAnC,CAEA,IAAM4C,EAAO3B,EAAO2B,KAGpB,GAAuB,kBAAnBA,EAAKC,WAAmD,kBAAlBD,EAAKkD,SAA8B,CAC3E,IAAMjF,EAAO,2BAAAS,OAAUsB,EAAKmD,YAAYC,QAAU,qDAAe,+JACjE1F,EAAKT,MAAMiB,SAASwD,aAClB1B,EAAKmD,YAAYC,QAAU,OAAS,QACpCnF,OAI0B,kBAAnB+B,EAAKC,WAAmD,UAAlBD,EAAKkD,UAEhDlD,EAAKmD,YAAYC,UACnBpE,SAASC,eAAe,kBAAkBC,MAAQ,GAElDxB,EAAKT,MAAMiB,SAASgI,YAAY,CAC9BpE,OAAQ9B,EAAKmD,YAAYrB,SAG3BpE,EAAKc,SAAS,SAACR,GACb,OAAOL,OAAOc,OAAO,GAAIT,EAAO,CAAC8B,SAAU,gBAMnDpC,EAAKT,MAAMiB,SAAS2C,iBAAiB,MA1CpBnD,4EA6CNsC,GACXhD,KAAKmB,WAAWmB,KAAK,CACnBW,UAAW,gBACXiD,SAAU,QACVO,OAAQ,CAACzD,EAAK8E,SAAU9E,EAAKmG,mDAIlBnG,GACbhD,KAAKmB,WAAWmB,KAAK,CACnBW,UAAW,gBACXiD,SAAU,gBACVO,OAAQ,CAACzD,EAAK8E,SAAU9E,EAAKmG,qDAK/B7J,OAAOC,SAAS6J,0CAQhB,IAAIrF,EACAjB,EAAW,OAUf,MAR4B,UAAxB9C,KAAKgB,MAAM8B,SACbA,EACEnD,EAAAC,EAAAC,cAACwJ,EAAD,CAAWnI,SAAUlB,KAAKC,MAAMiB,SAAU4C,eAAgB9D,KAAK4D,iBAGjEG,OAAgBE,EAIhBtE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OAAKK,GAAG,aAAaJ,UAAWiE,GAC9BpE,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,qBAEFF,EAAAC,EAAAC,cAACyJ,EAAD,CACEC,SAAUvJ,KAAKgJ,aACfQ,WAAYxJ,KAAKiJ,eACjBvE,aAAc1E,KAAKC,MAAMiB,SAASwD,gBAGrC5B,UAhGevC,IAAMC,WAsGxBiJ,cACJ,SAAAA,EAAYxJ,GAAO,IAAA+E,EAAA,OAAArE,OAAAC,EAAA,EAAAD,CAAAX,KAAAyJ,IACjBzE,EAAArE,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAA8I,GAAA1I,KAAAf,KAAMC,KACD+I,aAAehE,EAAKgE,aAAanH,KAAlBlB,OAAAmB,EAAA,EAAAnB,CAAAqE,IACpBA,EAAKiE,eAAiBjE,EAAKiE,eAAepH,KAApBlB,OAAAmB,EAAA,EAAAnB,CAAAqE,IAHLA,4EAMN0E,GACXA,EAAEC,iBACF3J,KAAKC,MAAMsJ,SAAS,CAClBzB,SAAU9F,SAASC,eAAe,iBAAiBC,MACnDiH,SAAUnH,SAASC,eAAe,kBAAkBC,+CAIzCwH,GAAG,IAAAvE,EAAAnF,KAChB0J,EAAEC,iBACF,IAAM7B,EAAW9F,SAASC,eAAe,iBAAiBC,MACpDiH,EAAWnH,SAASC,eAAe,kBAAkBC,MAKrD0H,EACJ,iBAAAlI,OAAOoG,EAAP,uBAAApG,OACO,IAAImI,OAAOV,EAAS1G,SAE7BzC,KAAKC,MAAMyE,aAAa,OANtB,sYAMqC,WACrCS,EAAKlF,MAAMyE,aAAa,OAAxB,gDAAAhD,OAA6CkI,GAAc,WACzDzE,EAAKlF,MAAMuJ,WAAW,CACpB1B,SAAUA,EACVqB,SAAUA,yCAOhB,OACExJ,EAAAC,EAAAC,cAAA,QAAMK,GAAG,cACPP,EAAAC,EAAAC,cAACoF,EAAD,CAAU9E,UAAU,eAAKD,GAAG,gBAAgBE,KAAK,OAAOC,aAAa,aACrEV,EAAAC,EAAAC,cAACoF,EAAD,CAAU9E,UAAU,eAAKD,GAAG,iBAAiBE,KAAK,WAAWC,aAAa,qBAC1EV,EAAAC,EAAAC,cAAA,SAAOO,KAAK,SAAS8B,MAAM,eAAKU,QAAS5C,KAAKgJ,aAAclJ,UAAU,cACtEH,EAAAC,EAAAC,cAAA,UAAQ+C,QAAS5C,KAAKiJ,eAAgBnJ,UAAU,aAAhD,wBA3CgBS,IAAMC,WAiDfuI,ICrHAe,cAnCb,SAAAA,EAAY7J,GAAO,IAAAS,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAX,KAAA8J,IACjBpJ,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAAmJ,GAAA/I,KAAAf,KAAMC,KACDe,MAAQ,CACX+I,cAAe,MAEjBrJ,EAAKqJ,cAAgBrJ,EAAKqJ,cAAclI,KAAnBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IACrBA,EAAKmD,iBAAmBnD,EAAKmD,iBAAiBhC,KAAtBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IACxBA,EAAKT,MAAM+J,0BAA0BtJ,EAAKmD,kBAPzBnD,gFAUFuJ,GACfjK,KAAKwB,SAAS,SAACR,GAAD,OAAWL,OAAOc,OAAOT,EAAO,CAC5C+I,cAAeE,8CAKbjK,KAAKgB,MAAM+I,eACb/J,KAAKgB,MAAM+I,iDAKb,OACEpK,EAAAC,EAAAC,cAAA,OAAKK,GAAG,4BACNP,EAAAC,EAAAC,cAAA,UACEC,UAAU,YACV8C,QAAS5C,KAAK+J,eAFhB,kBA1BmBxJ,IAAMC,WCA3B0J,mLAEF,IAAMC,EAAQ,CACZ5B,KAAQ,eACR6B,QAAW,eACXC,MAAS,gBACTrK,KAAKC,MAAMG,MAEb,OACET,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,gBAAgBqK,GAChCxK,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBAAkBE,KAAKC,MAAMgB,SAC5CtB,EAAAC,EAAAC,cAAA,QAAMC,UAAU,oBACdH,EAAAC,EAAAC,cAAA,UAAQ+C,QAAS5C,KAAKC,MAAMqK,KAAMxK,UAAU,aAA5C,0BAfSS,IAAMC,WAuBrB+J,cACJ,SAAAA,EAAYtK,GAAO,IAAAS,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAX,KAAAuK,IACjB7J,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAA4J,GAAAxJ,KAAAf,KAAMC,KACDe,MAAQ,GACbN,EAAKM,MAAMwJ,QAAU,GACrB9J,EAAK+J,gBAAkB,EAEvB/J,EAAKgE,aAAehE,EAAKgE,aAAa7C,KAAlBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IAEhBT,EAAMyK,uBACRzK,EAAMyK,sBAAsBhK,EAAKgE,cATlBhE,4EAYNN,EAAMa,GAAwB,IAAA+D,EAAAhF,KAAf2K,EAAeC,UAAAnI,OAAA,QAAAwB,IAAA2G,UAAA,GAAAA,UAAA,GAAN,KACnC5K,KAAKwB,SAAS,SAACR,GAQb,OAPAA,EAAKL,OAAAwC,EAAA,EAAAxC,CAAA,GAAOK,IACNwJ,QAAQ9H,KAAK,CACjBmI,WAAY7F,EAAKyF,gBACjBrK,KAAMA,EACNa,QAASA,EACT0J,SAAUA,IAEL3J,8CAIO6J,GAChB7K,KAAKwB,SAAS,SAACR,GACb,IAAI,IAAIwB,EAAI,EAAGA,EAAIxB,EAAMwJ,QAAQ/H,SAAUD,EACrCxB,EAAMwJ,QAAQhI,GAAGqI,WAAaA,GAChC7J,EAAMwJ,QAAQhD,OAAOhF,EAAG,GAG5B,OAAOxB,qCAMT,IAFO,IAAAmE,EAAAnF,KACD8K,EAAiB,GADhBtG,EAAA,SAEEhC,GACP,IAAMuI,EAAS5F,EAAKnE,MAAMwJ,QAAQhI,GAClCsI,EAAepI,KACb/C,EAAAC,EAAAC,cAACmL,EAAD,CACErI,IAAKoI,EAAOF,SACZzK,KAAM2K,EAAO3K,KACba,QAAS8J,EAAO9J,QAChBqJ,KAAM,WACJnF,EAAK8F,kBAAkBF,EAAOF,UAC1BE,EAAOJ,UACTI,EAAOJ,gBAVRnI,EAAI,EAAGA,EAAIxC,KAAKgB,MAAMwJ,QAAQ/H,SAAUD,EAAGgC,EAA3ChC,GAgBT,OACE7C,EAAAC,EAAAC,cAAA,OAAKK,GAAG,oBACL4K,UAzDsBvK,IAAMC,4BCqBtB0K,aA3Cb,SAAAA,EAAYC,GAAS,IAAAzK,EAAAV,KAAAW,OAAAC,EAAA,EAAAD,CAAAX,KAAAkL,GACnBlL,KAAKoL,WAAaD,EAAQE,KAC1BrL,KAAKsL,UAAY,GACjBtL,KAAK8E,OAAS,EAEd9E,KAAKuL,GAAKA,IAAG,IAAMvL,KAAKoL,YAGxBpL,KAAKuL,GAAGC,GAAG,eAAgB,SAACxI,GAE1B,IAAK,IAAMyI,KADXnM,OAAO8C,OAAOC,MAAd,iBAAAX,OAAqCJ,KAAKC,UAAUyB,EAAM,KAAM,KACvCtC,EAAK4K,UAC5B5K,EAAK4K,UAAUG,GAAYzI,6DAIrByI,EAAYC,GACtB1L,KAAKsL,UAAUG,GAAcC,yCAGhBD,UACNzL,KAAKsL,UAAUG,qCAGdvL,GACJA,GAAM,IACRA,EAAK,GACPF,KAAK8E,OAAS5E,+BAGX8C,GACHhD,KAAK2L,cAAc,CACjBC,KAAMC,KAAKC,MACX1L,KAAM,yBACN0E,OAAQ9E,KAAK8E,OACb9B,KAAMA,0CAIIA,GACZhD,KAAKuL,GAAGQ,KAAK,eAAgB/I,YC2DlBgJ,cA9Fb,SAAAA,EAAY/L,GAAO,IAAAS,EAmCjB,IAAK,IAAMuL,KAnCMtL,OAAAC,EAAA,EAAAD,CAAAX,KAAAgM,IACjBtL,EAAAC,OAAAE,EAAA,EAAAF,CAAAX,KAAAW,OAAAG,EAAA,EAAAH,CAAAqL,GAAAjL,KAAAf,KAAMC,KACDe,MAAQ,GACbN,EAAKgE,aAAe,KACpBhE,EAAKmD,iBAAmB,aACxBnD,EAAKwL,SAAW,CACdpH,OAAQ,EACRqH,SAAU,IAIZzL,EAAKS,WAAa,IAAI+J,EAAW,CAACG,KAAM,OAGxC3K,EAAKqE,YAAcrE,EAAKqE,YAAYlD,KAAjBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IACnBA,EAAKwI,YAAcxI,EAAKwI,YAAYrH,KAAjBlB,OAAAmB,EAAA,EAAAnB,CAAAD,IACnBA,EAAKgI,QAAUhI,EAAKgI,QAAQ7G,KAAblB,OAAAmB,EAAA,EAAAnB,CAAAD,IAGfA,EAAKQ,SAAW,CACdC,WAAYT,EAAKS,WACjB4D,YAAarE,EAAKqE,YAClBmE,YAAaxI,EAAKwI,YAClBxE,aAAc,eAAAM,EAAA,OAAaA,EAAAtE,GAAKgE,aAAL0H,MAAApH,EAAA4F,YAC3B/G,iBAAkB,eAAAsB,EAAA,OAAaA,EAAAzE,GAAKmD,iBAALuI,MAAAjH,EAAAyF,YAC/BlC,QAAShI,EAAKgI,SAIhBhI,EAAK2L,MAAQ,CACXC,WAAY,IAAIC,MAAM,mBACtBC,UAAW,IAAID,MAAM,kBACrBE,UAAW,IAAIF,MAAM,mBAGC7L,EAAK2L,MACvBJ,EAAUS,WAAW,SACvBhM,EAAK2L,MAAMJ,GAAWU,OAAS,GAC/BjM,EAAK2L,MAAMJ,GAAWW,MAAO,GAKjC,IAAMC,EAAa7K,SAASC,eAAe,OA3C1B,OA4CjB3C,OAAOwN,iBAAiB,QAAS,SAACpD,GAEhC,IADA,IAAIqD,EAASrD,EAAEqD,OACRA,GAAUA,IAAWF,GAAY,CACtC,GAAIE,EAAOC,UAAUC,SAAS,aAAc,CAC1CvM,EAAK2L,MAAMC,WAAWY,YAAc,EACpCxM,EAAK2L,MAAMC,WAAWa,OACtB,MAEFJ,EAASA,EAAOK,iBApDH1M,6EA0DjB,OAAOV,KAAKkM,6CAGF3D,GAERvI,KAAKkM,SADa,oBAAT3D,EACOA,EAAKvI,KAAK+E,aAEVwD,EAElBvI,KAAKmB,WAAWkM,UAAUrN,KAAKkM,SAASpH,wCAGlCmH,GACN,IAAK,IAAMI,KAASrM,KAAKqM,MACvBrM,KAAKqM,MAAMA,GAAOiB,QAClBtN,KAAKqM,MAAMA,GAAOa,YAAc,EAC5Bb,IAAUJ,GACZjM,KAAKqM,MAAMJ,GAAWkB,wCAInB,IAAAvH,EAAA5F,KACP,OACEL,EAAAC,EAAAC,cAAA,OAAKK,GAAG,OACNP,EAAAC,EAAAC,cAAC0N,EAAD,CAAWrM,SAAUlB,KAAKkB,WAC1BvB,EAAAC,EAAAC,cAAC2N,EAAD,CAAcxD,0BAA2B,SAACyD,GACxC7H,EAAK/B,iBAAmB4J,KAE1B9N,EAAAC,EAAAC,cAAC6N,EAAD,CAAkBhD,sBAAuB,SAAC+C,GACxC7H,EAAKlB,aAAe+I,aAxFZlN,IAAMC,WCNlBmN,EAAO,GAEbA,EAAKC,OAAL,WACE,SAAAC,IAAwB,IAAZ1C,EAAYP,UAAAnI,OAAA,QAAAwB,IAAA2G,UAAA,GAAAA,UAAA,GAAJ,GAAIjK,OAAAC,EAAA,EAAAD,CAAAX,KAAA6N,GACtB7N,KAAK8N,QAAU3C,EAAQ2C,SAAWxO,OAAOwO,QACzC9N,KAAK+N,WAAa,CAAC,QAAS,OAAQ,OAAQ,SAC5C/N,KAAKoI,MAAQpI,KAAK+N,WAAWC,QAAQ7C,EAAQ/C,OACzCpI,KAAKoI,MAAQ,IACfpI,KAAKoI,MAAQpI,KAAK+N,WAAWtL,OAAS,GAN5C,OAAA9B,OAAAsN,EAAA,EAAAtN,CAAAkN,EAAA,EAAAlL,IAAA,MAAAT,MAAA,SASMjB,GACFjB,KAAK8N,QAAQI,IAAIjN,KAVrB,CAAA0B,IAAA,QAAAT,MAAA,SAaQjB,GACAjB,KAAKoI,OAASpI,KAAK+N,WAAWC,QAAQ,UACxChO,KAAK8N,QAAQzL,MAAb,WAAAX,OAA8BT,MAfpC,CAAA0B,IAAA,OAAAT,MAAA,SAkBOjB,GACCjB,KAAKoI,OAASpI,KAAK+N,WAAWC,QAAQ,SACxChO,KAAK8N,QAAQvF,KAAb,UAAA7G,OAA4BT,MApBlC,CAAA0B,IAAA,OAAAT,MAAA,SAuBOjB,GACCjB,KAAKoI,OAASpI,KAAK+N,WAAWC,QAAQ,SACxChO,KAAK8N,QAAQK,KAAb,UAAAzM,OAA4BT,MAzBlC,CAAA0B,IAAA,QAAAT,MAAA,SA4BQjB,GACAjB,KAAKoI,OAASpI,KAAK+N,WAAWC,QAAQ,UACxChO,KAAK8N,QAAQzD,MAAb,WAAA3I,OAA8BT,QA9BpC4M,EAAA,GAkCAF,EAAKS,aAAe,SAACC,EAAaC,GAChC,IAAMC,EAAQF,GAAerM,SAASwM,gBAAgBC,YAChDC,EAASJ,GAAgBtM,SAASwM,gBAAgBG,aASxD,OALY,EAARJ,EAAqB,GAATG,EACRH,EAAQ,GAERG,EAAS,IAKnBf,EAAKiB,iBAAmB,WACtB5M,SAASwM,gBAAgBK,MAAMC,SAA/B,GAAApN,OAA6CiM,EAAKS,eAAlD,OAGaT,QC9BAoB,EAjBb,SAAAA,IAAepO,OAAAC,EAAA,EAAAD,CAAAX,KAAA+O,GAEbzP,OAAO8C,OAAS,IAAIuL,EAAKC,OAGzBD,EAAKiB,mBACLtP,OAAOwN,iBAAiB,oBAAqBa,EAAKiB,kBAClDtP,OAAOwN,iBAAiB,SAAUa,EAAKiB,kBAGvC5O,KAAKgP,IAAMC,IAASC,OAClBvP,EAAAC,EAAAC,cAACsP,EAAD,MACAnN,SAASC,eAAe,UCf9B3C,OAAO8P,iBAAmB,IAAIL,EhB6HxB,kBAAmBM,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.890c26be.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\n\r\nclass InputRow extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"input-row\">\r\n        <label htmlFor={this.props.id}>{this.props.labelText}</label>\r\n        <input type={this.props.type} id={this.props.id} autoComplete={this.props.autoComplete} onChange={this.props.onChange} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputRow;\r\n","import React from 'react';\r\n\r\nclass DeskPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      message: []\r\n    };\r\n\r\n    this.props.appUtils.serverSide.addListener('desk', (packet) => {\r\n      const message = JSON.stringify(packet, null, 2);\r\n      this.setState((state) => Object.assign(state, {\r\n        message: [...state.message, message]\r\n      }));\r\n    });\r\n\r\n    this.sendData = this.sendData.bind(this);\r\n  }\r\n\r\n  sendData() {\r\n    const message = JSON.parse(document.getElementById('desk-input-textarea').value.trim());\r\n    window.logger.debug(`senf from desk\\n${JSON.stringify(message, null, 2)}`);\r\n    this.props.appUtils.serverSide.send(message);\r\n  }\r\n\r\n  render() {\r\n    const message = this.state.message;\r\n    const messageNode = [];\r\n    for (let i = 0; i < message.length; ++i) {\r\n      messageNode.push(\r\n        <p key={i}>{message}<br /></p>\r\n      );\r\n      messageNode.push(\r\n        <hr key={'hr' + i} />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div id=\"desk-page\">\r\n        <div className=\"input-container\">\r\n          <textarea id=\"desk-input-textarea\"></textarea>\r\n          <button className=\"clickable\" onClick={this.sendData}>傳送</button>\r\n        </div>\r\n        <div className=\"output-window\" id=\"desk-output-window\">{messageNode}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DeskPage;\r\n","import React from 'react';\r\nimport DeskPage from './DeskPage';\r\n\r\nclass RoomWaitingPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nextPage: null,\r\n      roomInfo: null\r\n    };\r\n\r\n    this.props.appUtils.serverSide.addListener('room-waiting', (packet) => {\r\n      if (packet.type !== 'gameLogicEngineMessage')\r\n        return;\r\n\r\n      const data = packet.data;\r\n      if (data.eventType === 'room') {\r\n        if (data.action === 'getRoomInfo') {\r\n          this.setState((state) => {\r\n            state = {...state};\r\n            state.roomInfo = {\r\n              roomMode: data.roomMode,\r\n              roomId: data.roomId,\r\n              roomName: data.roomName,\r\n              roomLevel: data.roomLevel,\r\n              playerId: data.playerId,\r\n              full: data.full,\r\n              playing: data.playing\r\n            };\r\n            return state;\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    this.startGame = this.startGame.bind(this);\r\n    this.goBackThisPage = this.goBackThisPage.bind(this);\r\n    this.props.appUtils.setGoBackHandler(null);\r\n  }\r\n\r\n  goBackThisPage() {\r\n    this.setState((state) => Object.assign(state, {\r\n      nextPage: null\r\n    }));\r\n    this.props.appUtils.setGoBackHandler(this.props.goBackPrevPage);\r\n  }\r\n\r\n  startGame() {\r\n    this.setState((state) => Object.assign(state, {\r\n      nextPage: 'desk-page'\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    const playerList = [];\r\n\r\n    let nextPage;\r\n    let thisPageStyle = 'hide';\r\n    if (this.state.nextPage === 'desk-page') {\r\n      nextPage = (\r\n        <DeskPage\r\n          appUtils={this.props.appUtils}\r\n          goBackPrevPage={this.goBackThisPage}\r\n          roomId={this.props.roomId}\r\n        />\r\n      );\r\n    } else {\r\n      thisPageStyle = undefined;\r\n    }\r\n\r\n    return (\r\n      <div className=\"full-sized\">\r\n        <div id=\"room-waiting-page\" className={thisPageStyle}>\r\n          <div className=\"button-container\">\r\n            <button key=\"start\" className=\"clickable\" onClick={this.startGame}>\r\n              <span role=\"img\" aria-label=\"game\">🎮</span>開始遊戲: {this.props.roomId}\r\n            </button>\r\n          </div>\r\n          <div className=\"player-list\">\r\n            {playerList}\r\n          </div>\r\n        </div>\r\n        {nextPage}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RoomWaitingPage;\r\n","import React from 'react';\r\nimport RoomWaitingPage from './RoomWaitingPage';\r\nimport InputRow from './InputRow';\r\n\r\nclass RoomPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nextPage: null,\r\n      roomMode: -1,\r\n      roomList: {},\r\n      creatingRoom: false,\r\n    };\r\n    this.nextRoomId = 0;\r\n\r\n    this.props.appUtils.serverSide.addListener('room-page', (packet) => {\r\n      if (packet.type !== 'gameLogicEngineMessage')\r\n        return;\r\n\r\n      if (!this.state.nextPage && packet.data.eventType === 'room') {\r\n        const data = packet.data;\r\n\r\n        // return room list\r\n        if (data.action === 'getRoomList') {\r\n          for (let i = 0; i < data.roomId.length; ++i) {\r\n            this.setState((state) => {\r\n              state = {...state};\r\n              state.roomList[data.roomId[i]] = null;\r\n              return state;\r\n            });\r\n            this.props.appUtils.serverSide.send({\r\n              eventType: 'room',\r\n              action: 'getRoomInfo',\r\n              roomMode: data.roomMode,\r\n              roomId: data.roomId[i]\r\n            });\r\n          }\r\n\r\n        // return room info\r\n        } else if (data.action === 'getRoomInfo') {\r\n          this.setState((state) => {\r\n            state = {...state};\r\n            state.roomList[data.roomId] = {\r\n              roomMode: data.roomMode,\r\n              roomId: data.roomId,\r\n              roomName: data.roomName,\r\n              roomLevel: data.roomLevel,\r\n              playerId: data.playerId,\r\n              full: data.full,\r\n              playing: data.playing\r\n            };\r\n            return state;\r\n          });\r\n        \r\n        // return result of create room\r\n        } else if (data.action === 'createRoom') {\r\n          if (data.result) {\r\n            this.nextRoomId = data.roomId;\r\n            this.props.appUtils.promptDialog(\r\n              'info',\r\n              `成功建立並加入房間😏~\\n房間編號: ${data.roomId}\\n房間名稱: ${data.roomName}`,\r\n              () => {\r\n                this.setState((state) => Object.assign(state, {\r\n                  nextPage: 'room-waiting-page',\r\n                }));\r\n              }\r\n            );\r\n            \r\n          } else {\r\n            this.props.appUtils.promptDialog('error', '建立房間失敗😰');\r\n          }\r\n\r\n        // enter room\r\n        } else if (data.action === 'enterRoom' || data.action === 'enterRoomRandom') {\r\n          if (data.result) {\r\n            this.nextRoomId = data.roomId;\r\n            this.setState((state) => Object.assign(state, {\r\n              nextPage: 'room-waiting-page'\r\n            }));\r\n          } else {\r\n            this.props.appUtils.promptDialog('error', '⛔無法加入房間⛔\\n別問我為啥因為我也不知道🙄!');\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    this.handleClickCreateRoomButton = this.handleClickCreateRoomButton.bind(this);\r\n    this.goBackThisPage = this.goBackThisPage.bind(this);\r\n    this.props.appUtils.setGoBackHandler(this.props.goBackPrevPage);\r\n  }\r\n\r\n  goBackThisPage() {\r\n    this.setState((state) => Object.assign(state, {\r\n      nextPage: null\r\n    }));\r\n    this.props.appUtils.setGoBackHandler(this.props.goBackPrevPage);\r\n  }\r\n\r\n  setRoomMode(roomMode) {\r\n    this.setState((state) => Object.assign(state, {\r\n      roomMode: roomMode,\r\n      roomList: {},\r\n      creatingRoom: false\r\n    }));\r\n    this.getRoomList(roomMode);\r\n  }\r\n\r\n  getRoomList(roomMode) {\r\n    this.props.appUtils.serverSide.send({\r\n      eventType: 'room',\r\n      action: 'getRoomList',\r\n      roomMode: roomMode\r\n    });\r\n  }\r\n\r\n  handleClickCreateRoomButton() {\r\n    this.setState((state) => Object.assign(state, {\r\n      creatingRoom: true\r\n    }));\r\n  }\r\n\r\n  createRoom(roomName) {\r\n    this.props.appUtils.serverSide.send({\r\n      eventType: 'room',\r\n      action: 'createRoom',\r\n      roomMode: this.state.roomMode,\r\n      roomName: roomName,\r\n      roomPassword: '',\r\n      userId: this.props.appUtils.getUserInfo().userId\r\n    });\r\n  }\r\n\r\n  handleEnterRoomButton(roomId) {\r\n    this.props.appUtils.serverSide.send({\r\n      eventType: 'room',\r\n      action: roomId === -1 ? 'enterRoomRandom' : 'enterRoom',\r\n      roomMode: this.state.roomMode,\r\n      roomId: roomId === -1 ? undefined : roomId,\r\n      roomPassword: '',\r\n      userId: this.props.appUtils.getUserInfo().userId\r\n    });\r\n  }\r\n\r\n  renderCreateRoomForm() {\r\n    return (\r\n      <div id=\"create-room-form\">\r\n        <InputRow labelText=\"房間名稱\" id=\"create-room-name\" type=\"text\" />\r\n        <button\r\n          className=\"clickable\"\r\n          onClick={() => {\r\n            this.createRoom(\r\n              document.getElementById('create-room-name').value\r\n            );\r\n            this.setState((state) => Object.assign(state, {\r\n              creatingRoom: false\r\n            }));\r\n          }}>\r\n          建立\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderRoomList() {\r\n    const roomList = [];\r\n\r\n    // create room button\r\n    const buttons = [];\r\n\r\n    if (this.state.roomMode >= 0) {\r\n      buttons.push(\r\n        <button\r\n          key=\"enter-room-random\"\r\n          onClick={() => {this.handleEnterRoomButton(-1);}}\r\n          className=\"clickable\">\r\n          隨機進房\r\n        </button>\r\n      );\r\n    }\r\n\r\n    if (this.state.roomMode === 1) {\r\n      buttons.push(\r\n        <button\r\n          key=\"create-room\"\r\n          onClick={this.handleClickCreateRoomButton}\r\n          className=\"clickable\">\r\n          建立房間\r\n        </button>\r\n      );\r\n    }\r\n\r\n    roomList.push(<li key={-1}>{buttons}</li>);\r\n\r\n    // append all rooms\r\n    for (let roomId in this.state.roomList) {\r\n      roomId = parseInt(roomId, 10);\r\n      const room = this.state.roomList[roomId];\r\n      const liContent = [];\r\n      liContent.push(<span key=\"room-id\" className=\"room-id\">{roomId}</span>);\r\n\r\n      if (room) {\r\n        liContent.push(<span key=\"room-name\" className=\"room-name\">{room.roomName}</span>);\r\n        liContent.push(<span key=\"room-level\" className=\"room-level\">{room.roomLevel}</span>);\r\n        liContent.push(<span key=\"room-players\" className=\"room-player\">{room.playerId.length}人</span>);\r\n      }\r\n\r\n      roomList.push(\r\n        <li\r\n          key={roomId}\r\n          onClick={() => {this.handleEnterRoomButton(roomId);}}\r\n          className=\"clickable\">{liContent}\r\n        </li>\r\n      );\r\n    }\r\n\r\n    return (<ul className=\"room-list\">{roomList}</ul>);\r\n  }\r\n\r\n  render() {\r\n    let windowContent;\r\n    if (this.state.creatingRoom) {\r\n      windowContent = this.renderCreateRoomForm();\r\n    } else {\r\n      windowContent = this.renderRoomList();\r\n    }\r\n\r\n    let nextPage;\r\n    let thisPageStyle = 'hide';\r\n    if (this.state.nextPage === 'room-waiting-page') {\r\n      nextPage = (\r\n        <RoomWaitingPage\r\n          appUtils={this.props.appUtils}\r\n          goBackPrevPage={this.goBackThisPage}\r\n          roomId={this.nextRoomId}\r\n        />\r\n      );\r\n    } else {\r\n      thisPageStyle = undefined;\r\n    }\r\n\r\n    return (\r\n      <div className=\"full-size\">\r\n        <div id=\"room-page\" className={thisPageStyle}>\r\n          <div id=\"room-page-select-mode\">\r\n            <button id=\"room-page-normal-mode-button\" className=\"clickable\" onClick={() => {this.setRoomMode(1);}}>一般模式</button>\r\n            <button id=\"room-page-ladder-mode-button\" className=\"clickable\" onClick={() => {this.setRoomMode(2);}}>天梯模式</button>\r\n          </div>\r\n          <div className=\"content-window\">\r\n            {windowContent}\r\n          </div>\r\n        </div>\r\n        {nextPage}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RoomPage;\r\n","import React from 'react';\r\n\r\nclass CardPoolPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n\r\n    this.props.appUtils.serverSide.addListener('card-pool', (packet) => {\r\n      if (packet.type !== 'gameLogicEngineMessage')\r\n        return;\r\n\r\n      const data = packet.data;\r\n      if (data.eventType === 'accountSystem' && data.function === 'drawCards') {\r\n        if (data.returnValue.success) {\r\n          this.props.appUtils.promptDialog(\r\n            'info',\r\n            `抽卡成功😏~\\n抽卡張數:${data.returnValue.amount}\\n剩餘額度:${data.returnValue.money}`\r\n          );\r\n        } else {\r\n          this.props.appUtils.promptDialog(\r\n            'error',\r\n            `抽卡失敗😰`\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n    this.drawCards = this.drawCards.bind(this);\r\n    this.props.appUtils.setGoBackHandler(this.props.goBackPrevPage);\r\n  }\r\n\r\n  drawCards(num) {\r\n    this.props.appUtils.serverSide.send({\r\n      eventType: 'accountSystem',\r\n      function: 'drawCards',\r\n      params: [num]\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"card-pool-page\">\r\n        <div className=\"button-container\">\r\n          <button key={100} className=\"clickable\" onClick={() => {this.drawCards(100);}}>\r\n            <span role=\"img\" aria-label=\"green-checked\">✅一時抽卡一時爽✅<br />1張100</span>\r\n          </button>\r\n          <button key={1000} className=\"clickable\" onClick={() => {this.drawCards(1000);}}>\r\n            <span role=\"img\" aria-label=\"heart\">🧡一直抽卡一直爽🧡<br />11張1000</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CardPoolPage;\r\n","import React from 'react';\r\n\r\nclass ModifyCardsPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n\r\n    this.props.appUtils.serverSide.addListener('modify-cards', (packet) => {\r\n      if (packet.type !== 'gameLogicEngineMessage')\r\n        return;\r\n\r\n      const data = packet.data;\r\n      if (data.eventType === 'accountSystem') {\r\n        if ((data.function === 'getCards' || data.function === 'modifyCards') /*&& data.returnValue.success*/) {\r\n          this.setState((state) => Object.assign(state, {\r\n            deck: [...data.returnValue.deck].sort((a, b) => a - b),\r\n            amounts: data.returnValue.amounts,\r\n            cards: [...data.returnValue.cards].sort((a, b) => a - b)\r\n          }));\r\n        }\r\n      }\r\n    });\r\n\r\n    this.getCards = this.getCards.bind(this);\r\n    this.modifyCards = this.modifyCards.bind(this);\r\n    this.props.appUtils.setGoBackHandler(this.props.goBackPrevPage);\r\n\r\n    this.getCards();\r\n  }\r\n\r\n  getCards() {\r\n    this.props.appUtils.serverSide.send({\r\n      eventType: 'accountSystem',\r\n      function: 'getCards',\r\n      params: [this.props.appUtils.getUserInfo().userId]\r\n    });\r\n  }\r\n\r\n  modifyCards() {\r\n    const newCards = [...this.state.cards];\r\n    for (let i = 0; i < newCards.length; ++i) {\r\n      const randomIndex = Math.floor(Math.random() * newCards.length);\r\n      [newCards[i], newCards[randomIndex]] = [newCards[randomIndex], newCards[i]];\r\n    }\r\n\r\n    this.props.appUtils.serverSide.send({\r\n      eventType: 'accountSystem',\r\n      function: 'modifyCards',\r\n      params: [this.props.appUtils.getUserInfo().userId],\r\n      deck: newCards.splice(0, 30)\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const content = [\r\n      <p key=\"deck\">\r\n        牌組: {this.state.deck && this.state.deck.join(', ')}\r\n      </p>,\r\n      <p key=\"amount\">\r\n        卡片總數: {this.state.amounts || ''}\r\n      </p>,\r\n      <p key=\"cards\">\r\n        所有卡牌: {this.state.cards && this.state.cards.join(', ')}\r\n      </p>\r\n    ];\r\n\r\n    return (\r\n      <div className=\"full-size\">\r\n        <div id=\"modify-cards-page\">\r\n          <div className=\"content-container\">\r\n            <div key=\"cards-info\" className=\"cards-info\">{content}</div>\r\n            <div key=\"button-container\" className=\"button-container\">\r\n              <button className=\"clickable\" onClick={this.modifyCards}>\r\n                <span role=\"img\" aria-label=\"dice\">🎲</span>隨機組牌\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModifyCardsPage;\r\n","import React from 'react';\r\n\r\nclass PlayerInfoPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      playerInfo: null\r\n    };\r\n\r\n    this.props.appUtils.serverSide.addListener('player-info', (packet) => {\r\n      if (packet.type !== 'gameLogicEngineMessage')\r\n        return;\r\n      \r\n      const data = packet.data;\r\n      if (data.eventType === 'accountSystem') {\r\n        // get player info\r\n        if (data.function === 'getAccountInfo') {\r\n          if (data.returnValue.success) {\r\n            const userId = this.props.appUtils.getUserInfo().userId;\r\n            const returnInfo = data.returnValue[userId];\r\n            this.setState((state) => Object.assign(state, {playerInfo: {\r\n              userId: userId,\r\n              username: returnInfo.accountName,\r\n              money: returnInfo.money,\r\n              ladderPoint: returnInfo.ladderPoint,\r\n              ladderLevel: returnInfo.ladderLevel,\r\n              win: returnInfo.win,\r\n              lose: returnInfo.lose,\r\n              level: returnInfo.level,\r\n              exp: returnInfo.exp\r\n            }}));\r\n          }\r\n        } else if (data.function === 'payMoney') {\r\n          this.sendPlayerInfoPacket();\r\n        }\r\n      }\r\n    });\r\n    this.sendPlayerInfoPacket = this.sendPlayerInfoPacket.bind(this);\r\n    this.sendPlayerInfoPacket();\r\n  }\r\n\r\n  sendPlayerInfoPacket() {\r\n    this.props.appUtils.serverSide.send({\r\n      eventType: 'accountSystem',\r\n      function: 'getAccountInfo',\r\n      params: [\r\n        this.props.appUtils.getUserInfo().userId\r\n      ]\r\n    });\r\n    this.props.appUtils.setGoBackHandler(this.props.goBackPrevPage);\r\n  }\r\n\r\n  getMoney(money) {\r\n    this.props.appUtils.serverSide.send({\r\n      eventType: 'accountSystem',\r\n      function: 'payMoney',\r\n      params: [money]\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const info = this.state.playerInfo;\r\n    return (\r\n      <div className=\"full-size\">\r\n        <div id=\"player-info-page\">\r\n          <div className=\"get-money-container\">\r\n            <button id=\"100\" className=\"clickable\" onClick={() => {this.getMoney(100);}}>氪金100元!!</button>\r\n            <button id=\"500\" className=\"clickable\" onClick={() => {this.getMoney(500);}}>氪金500元!!</button>\r\n            <button id=\"1000\" className=\"clickable\" onClick={() => {this.getMoney(1000);}}>氪金1000元!!</button>\r\n          </div>\r\n          <div className=\"info-container\">\r\n            <ul>\r\n              <li key=\"username\">帳號: {info && info.username}</li>\r\n              <li key=\"userId\">ID: {info && info.userId}</li>\r\n              <li key=\"exp\">經驗值: {info && info.exp}</li>\r\n              <li key=\"money\">額度: {info && info.money}</li>\r\n              <li key=\"level\">等級: {info && info.level}</li>\r\n              <li key=\"win\">勝局: {info && info.win}</li>\r\n              <li key=\"lose\">敗局: {info && info.lose}</li>\r\n              <li key=\"ladderPoint\">天梯積分: {info && info.ladderPoint}</li>\r\n              <li key=\"ladderLevel\">天梯等級: {info && info.ladderLevel}</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlayerInfoPage;\r\n","import React from 'react';\r\nimport RoomPage from './RoomPage';\r\nimport CardPoolPage from './CardPoolPage';\r\nimport ModifyCardsPage from './ModifyCardsPage';\r\nimport PlayerInfoPage from './PlayerInfoPage';\r\n\r\nclass LobbyPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nextPage: null,\r\n    };\r\n\r\n    this.goBackThisPage = this.goBackThisPage.bind(this);\r\n    this.props.appUtils.setGoBackHandler(this.props.goBackPrevPage);\r\n\r\n    // play bgm\r\n    this.props.appUtils.playBgm('bgmNormal');\r\n  }\r\n\r\n  goBackThisPage() {\r\n    this.setState((state) => Object.assign(state, {\r\n      nextPage: null\r\n    }));\r\n    this.props.appUtils.setGoBackHandler(this.props.goBackPrevPage);\r\n  }\r\n\r\n  render() {\r\n    let nextPage;\r\n    let thisPageStyle = 'hide';\r\n    if (this.state.nextPage === 'room') {\r\n      nextPage = <RoomPage appUtils={this.props.appUtils} goBackPrevPage={this.goBackThisPage} />;\r\n    } else if (this.state.nextPage === 'card-pool') {\r\n      nextPage = <CardPoolPage appUtils={this.props.appUtils} goBackPrevPage={this.goBackThisPage} />;\r\n    } else if (this.state.nextPage === 'modify-cards') {\r\n      nextPage = <ModifyCardsPage appUtils={this.props.appUtils} goBackPrevPage={this.goBackThisPage}  />;\r\n    } else if (this.state.nextPage === 'player-info') {\r\n      nextPage = <PlayerInfoPage appUtils={this.props.appUtils} goBackPrevPage={this.goBackThisPage}  />;\r\n    } else {\r\n      thisPageStyle = undefined;\r\n    }\r\n\r\n    return (\r\n      <div className=\"full-size\">\r\n        <div id=\"lobby-page\" className={thisPageStyle}>\r\n          <div className=\"button-container\">\r\n            <button key={1} className=\"clickable\" onClick={() => {this.setState((state) => Object.assign(state, {nextPage: 'room'}));}}>選擇對戰模式</button>\r\n            <button key={2} className=\"clickable\" onClick={() => {this.setState((state) => Object.assign(state, {nextPage: 'card-pool'}));}}>卡池</button>\r\n            <button key={3} className=\"clickable\" onClick={() => {this.setState((state) => Object.assign(state, {nextPage: 'modify-cards'}));}}>修改排組</button>\r\n            <button key={4} className=\"clickable\" onClick={() => {this.setState((state) => Object.assign(state, {nextPage: 'player-info'}));}}>玩家資訊</button>\r\n          </div>\r\n        </div>\r\n        {nextPage}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LobbyPage;\r\n","import React from 'react';\r\nimport InputRow from './InputRow';\r\nimport LobbyPage from './LobbyPage';\r\n\r\nclass LoginPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nextPage: null\r\n    };\r\n\r\n    this.serverSide = this.props.appUtils.serverSide;\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleRegister = this.handleRegister.bind(this);\r\n    this.goBackThisPage = this.goBackThisPage.bind(this);\r\n\r\n    // listen to serverSide\r\n    this.serverSide.addListener('login-page', (packet) => {\r\n      if (!this.state.nextPage && packet.type !== 'gameLogicEngineMessage')\r\n        return;\r\n      const data = packet.data;\r\n\r\n      // result of create acount\r\n      if (data.eventType === 'accountSystem' && data.function === 'createAccount') {\r\n        const message = `建立帳號${data.returnValue.success ? '成功! 🎉🎉🎉' : '失敗!\\n可能的原因: 不合法的帳號或密碼或是已經有此使用者'}`;\r\n        this.props.appUtils.promptDialog(\r\n          data.returnValue.success ? 'info' : 'error',\r\n          message\r\n        );\r\n      \r\n      // result of login\r\n      } else if (data.eventType === 'accountSystem' && data.function === 'login') {\r\n        // login success\r\n        if (data.returnValue.success) {\r\n          document.getElementById('input-password').value = ''; // clear password\r\n          // set userId\r\n          this.props.appUtils.setUserInfo({\r\n            userId: data.returnValue.userId\r\n          });\r\n          // goto lobby page\r\n          this.setState((state) => {\r\n            return Object.assign({}, state, {nextPage: 'lobby'});\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    this.props.appUtils.setGoBackHandler(null);\r\n  }\r\n\r\n  handleSubmit(data) {\r\n    this.serverSide.send({\r\n      eventType: 'accountSystem',\r\n      function: 'login',\r\n      params: [data.username, data.password]\r\n    });\r\n  }\r\n\r\n  handleRegister(data) {\r\n    this.serverSide.send({\r\n      eventType: 'accountSystem',\r\n      function: 'createAccount',\r\n      params: [data.username, data.password]\r\n    });\r\n  }\r\n\r\n  goBackThisPage() {\r\n    window.location.reload();\r\n    /*this.setState((state) => Object.assign(state, {\r\n      nextPage: null\r\n    }));\r\n    this.props.appUtils.setGoBackHandler(null);*/\r\n  }\r\n\r\n  render() {\r\n    let thisPageStyle;\r\n    let nextPage = 'hide';\r\n    \r\n    if (this.state.nextPage === 'lobby') {\r\n      nextPage = (\r\n        <LobbyPage appUtils={this.props.appUtils} goBackPrevPage={this.goBackThisPage} />\r\n      );\r\n    } else {\r\n      thisPageStyle = undefined;\r\n    }\r\n\r\n    return (\r\n      <div className=\"full-size\">\r\n        <div id=\"login-page\" className={thisPageStyle}>\r\n          <h1>\r\n            <span>Another</span>\r\n            <span>Card</span>\r\n            <span>Game</span>\r\n          </h1>\r\n          <LoginForm\r\n            onSubmit={this.handleSubmit}\r\n            onRegister={this.handleRegister}\r\n            promptDialog={this.props.appUtils.promptDialog}\r\n          />\r\n        </div>\r\n        {nextPage}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass LoginForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleRegister = this.handleRegister.bind(this);\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    this.props.onSubmit({\r\n      username: document.getElementById('input-account').value,\r\n      password: document.getElementById('input-password').value\r\n    });\r\n  }\r\n\r\n  handleRegister(e) {\r\n    e.preventDefault();\r\n    const username = document.getElementById('input-account').value;\r\n    const password = document.getElementById('input-password').value;\r\n\r\n    const terms =\r\n      '請先閱讀並同意以下使用條款:\\n' +\r\n      '本遊戲不會擅自在您未授權的情況下，將您的個人資料經由散佈、拍賣等方式移交給第三者，因為我們懶得做🙄。';\r\n    const signUpInfo =\r\n      `帳號: ${username}\\n` +\r\n      `密碼: ${'*'.repeat(password.length)}`;\r\n\r\n    this.props.promptDialog('info', terms, () => {\r\n      this.props.promptDialog('info', `確定齁🤔🤔?\\n${signUpInfo}`, () => {\r\n        this.props.onRegister({\r\n          username: username,\r\n          password: password\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form id=\"login-form\">\r\n        <InputRow labelText=\"帳號\" id=\"input-account\" type=\"text\" autoComplete=\"username\" />\r\n        <InputRow labelText=\"密碼\" id=\"input-password\" type=\"password\" autoComplete=\"current-password\" />\r\n        <input type=\"submit\" value=\"登入\" onClick={this.handleSubmit} className=\"clickable\" />\r\n        <button onClick={this.handleRegister} className=\"clickable\">註冊</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginPage;\r\n","import React from 'react';\r\n\r\nclass GobackButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      goBackHandler: null\r\n    };\r\n    this.goBackHandler = this.goBackHandler.bind(this);\r\n    this.setGoBackHandler = this.setGoBackHandler.bind(this);\r\n    this.props.returnSetGoBackHandlerFun(this.setGoBackHandler);\r\n  }\r\n\r\n  setGoBackHandler(handler) {\r\n    this.setState((state) => Object.assign(state, {\r\n      goBackHandler: handler\r\n    }));\r\n  }\r\n\r\n  goBackHandler() {\r\n    if (this.state.goBackHandler) {\r\n      this.state.goBackHandler();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"go-back-button-container\">\r\n        <button\r\n          className=\"clickable\"\r\n          onClick={this.goBackHandler}>\r\n          ←\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GobackButton;\r\n","import React from 'react';\r\n\r\nclass Dialog extends React.Component {\r\n  render() {\r\n    const title = {\r\n      'info': '訊息',\r\n      'warning': '警告',\r\n      'error': '錯誤',\r\n    }[this.props.type];\r\n\r\n    return (\r\n      <div className=\"dialog-container\">\r\n        <div className=\"dialog\">\r\n          <span className=\"dialog-title\">{title}</span>\r\n          <hr />\r\n          <div className=\"dialog-message\">{this.props.message}</div>\r\n          <span className=\"button-container\">\r\n            <button onClick={this.props.onOk} className=\"clickable\">確認</button>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass DialogController extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.state.dialogs = [];\r\n    this.lastDialogIndex = 0;\r\n\r\n    this.promptDialog = this.promptDialog.bind(this);\r\n    // return promptDialog method to parent\r\n    if (props.returnPromptDialogFun)\r\n      props.returnPromptDialogFun(this.promptDialog);\r\n  }\r\n\r\n  promptDialog(type, message, callback=null) {\r\n    this.setState((state) => {\r\n      state = {...state};\r\n      state.dialogs.push({\r\n        dialogId: ++this.lastDialogIndex,\r\n        type: type,\r\n        message: message,\r\n        callback: callback\r\n      });\r\n      return state;\r\n    });\r\n  }\r\n\r\n  handleClearDialog(dialogId) {\r\n    this.setState((state) => {\r\n      for(let i = 0; i < state.dialogs.length; ++i) {\r\n        if (state.dialogs[i].dialogId === dialogId) {\r\n          state.dialogs.splice(i, 1);\r\n        }\r\n      }\r\n      return state;\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const dialogElements = [];\r\n    for (let i = 0; i < this.state.dialogs.length; ++i) {\r\n      const dialog = this.state.dialogs[i];\r\n      dialogElements.push(\r\n        <Dialog\r\n          key={dialog.dialogId}\r\n          type={dialog.type}\r\n          message={dialog.message}\r\n          onOk={() => {\r\n            this.handleClearDialog(dialog.dialogId);\r\n            if (dialog.callback)\r\n              dialog.callback();\r\n          }}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div id=\"dialog-container\">\r\n        {dialogElements}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dialog;\r\nexport {DialogController};\r\n","import io from'socket.io-client';\r\n\r\nclass ServerSide {\r\n  constructor(options) {\r\n    this.serverPort = options.port;\r\n    this.listeners = {};\r\n    this.userId = 0;\r\n\r\n    this.io = io(':' + this.serverPort);\r\n\r\n    // onData handler\r\n    this.io.on('dataToClient', (data) => {\r\n      window.logger.debug(`from server:\\n${JSON.stringify(data, null, 2)}`);\r\n      for (const identifier in this.listeners)\r\n        this.listeners[identifier](data);\r\n    });\r\n  }\r\n\r\n  addListener(identifier, handdler) {\r\n    this.listeners[identifier] = handdler;\r\n  }\r\n\r\n  removeListener(identifier) {\r\n    delete this.listeners[identifier];\r\n  }\r\n\r\n  setUserId(id) {\r\n    if (id <= 0)\r\n      id = 0;\r\n    this.userId = id;\r\n  }\r\n\r\n  send(data) {\r\n    this.sendRawObject({\r\n      time: Date.now(),\r\n      type: 'gameLogicEngineMessage',\r\n      userId: this.userId,\r\n      data: data\r\n    });\r\n  }\r\n\r\n  sendRawObject(data) {\r\n    this.io.emit('dataToServer', data);\r\n  }\r\n}\r\n\r\nexport default ServerSide;\r\n","import React from 'react';\r\nimport LoginPage from './LoginPage';\r\nimport GoBackButton from './GoBackButton';\r\nimport {DialogController} from './Dialog';\r\nimport ServerSide from './ServerSide';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.promptDialog = null;\r\n    this.setGoBackHandler = () => {};\r\n    this.userInfo = {\r\n      userId: 0,\r\n      userName: ''\r\n    };\r\n\r\n    // init server side communication\r\n    this.serverSide = new ServerSide({port: 3456});\r\n\r\n    // bind methods\r\n    this.getUserInfo = this.getUserInfo.bind(this);\r\n    this.setUserInfo = this.setUserInfo.bind(this);\r\n    this.playBgm = this.playBgm.bind(this);\r\n\r\n    // make child-page params\r\n    this.appUtils = {\r\n      serverSide: this.serverSide,\r\n      getUserInfo: this.getUserInfo,\r\n      setUserInfo: this.setUserInfo,\r\n      promptDialog: (...args) => this.promptDialog(...args),\r\n      setGoBackHandler: (...args) => this.setGoBackHandler(...args),\r\n      playBgm: this.playBgm\r\n    };\r\n\r\n    // config audio\r\n    this.audio = {\r\n      clickSound: new Audio('click-sound.wav'),\r\n      bgmNormal: new Audio('bgm-normal.mp3'),\r\n      bgmBattle: new Audio('bgm-battle.mp3')\r\n    };\r\n\r\n    for (const audioName in this.audio) {\r\n      if (audioName.startsWith('bgm')) {\r\n        this.audio[audioName].volume = 0.3;\r\n        this.audio[audioName].loop = true;\r\n      }\r\n    }\r\n\r\n    // config click sound\r\n    const appElement = document.getElementById('app');\r\n    window.addEventListener('click', (e) => {\r\n      let target = e.target;\r\n      while (target && target !== appElement) {\r\n        if (target.classList.contains('clickable')) {\r\n          this.audio.clickSound.currentTime = 0;\r\n          this.audio.clickSound.play();\r\n          break;\r\n        }\r\n        target = target.parentElement;\r\n      }\r\n    });\r\n  }\r\n\r\n  getUserInfo() {\r\n    return this.userInfo;\r\n  }\r\n\r\n  setUserInfo(info) {\r\n    if (typeof info === 'function')\r\n      this.userInfo = info(this.getUserInfo);\r\n    else\r\n      this.userInfo = info;\r\n    \r\n    this.serverSide.setUserId(this.userInfo.userId);\r\n  }\r\n\r\n  playBgm(audioName) {\r\n    for (const audio in this.audio) {\r\n      this.audio[audio].pause();\r\n      this.audio[audio].currentTime = 0;\r\n      if (audio === audioName)\r\n        this.audio[audioName].play();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"app\">\r\n        <LoginPage appUtils={this.appUtils} />\r\n        <GoBackButton returnSetGoBackHandlerFun={(fun) => {\r\n          this.setGoBackHandler = fun;\r\n        }} />\r\n        <DialogController returnPromptDialogFun={(fun) => {\r\n          this.promptDialog = fun;\r\n        }} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","const util = {};\r\n\r\nutil.Logger = class {\r\n  constructor(options={}) {\r\n    this.console = options.console || window.console;\r\n    this.levelOrder = ['debug', 'info', 'warn', 'error'];\r\n    this.level = this.levelOrder.indexOf(options.level);\r\n    if (this.level < 0)\r\n      this.level = this.levelOrder.length - 1;\r\n  }\r\n\r\n  log(message) {\r\n    this.console.log(message);\r\n  }\r\n\r\n  debug(message) {\r\n    if (this.level >= this.levelOrder.indexOf('debug'))\r\n      this.console.debug(`[DEBUG] ${message}`);\r\n  }\r\n\r\n  info(message) {\r\n    if (this.level >= this.levelOrder.indexOf('info'))\r\n      this.console.info(`[INFO] ${message}`);\r\n  }\r\n\r\n  warn(message) {\r\n    if (this.level >= this.levelOrder.indexOf('warn'))\r\n      this.console.warn(`[WARN] ${message}`);\r\n  }\r\n\r\n  error(message) {\r\n    if (this.level >= this.levelOrder.indexOf('error'))\r\n      this.console.error(`[ERROR] ${message}`);\r\n  }\r\n};\r\n\r\nutil.calculateRem = (customWidth, customHeight) => {\r\n  const width = customWidth || document.documentElement.clientWidth;\r\n  const height = customHeight || document.documentElement.clientHeight;\r\n\r\n  let rem;\r\n\r\n  if (width * 9 < height * 16) // portrait\r\n    rem = width / 32;\r\n  else // landscape\r\n    rem = height / 18;\r\n\r\n  return rem;\r\n};\r\n\r\nutil.adjustWindowSize = () => {\r\n  document.documentElement.style.fontSize = `${util.calculateRem()}px`;\r\n};\r\n\r\nexport default util;\r\n","//import React from 'react';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport util from './Util';\r\n\r\nclass AcgAppController {\r\n  constructor() {\r\n    // cofig logger\r\n    window.logger = new util.Logger();\r\n\r\n    // config app size\r\n    util.adjustWindowSize();\r\n    window.addEventListener('orientationchange', util.adjustWindowSize);    \r\n    window.addEventListener('resize', util.adjustWindowSize);\r\n\r\n    // render app\r\n    this.app = ReactDOM.render(\r\n      <App />,\r\n      document.getElementById('root')\r\n    );\r\n  }\r\n}\r\n\r\nexport default AcgAppController;\r\n","import * as serviceWorker from './serviceWorker';\r\nimport './index.scss';\r\nimport AcgAppController from './AcgAppController';\r\n\r\nwindow.acgAppController = new AcgAppController();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}